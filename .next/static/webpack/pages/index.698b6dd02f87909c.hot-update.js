"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Home; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/head */ \"./node_modules/next/head.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_GraphVisualizer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/GraphVisualizer */ \"./components/GraphVisualizer.js\");\n/* harmony import */ var _components_Sidebar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/Sidebar */ \"./components/Sidebar.js\");\n/* harmony import */ var _components_DetailsPanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/DetailsPanel */ \"./components/DetailsPanel.js\");\n/* harmony import */ var _components_LoadingSpinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/LoadingSpinner */ \"./components/LoadingSpinner.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\nfunction Home() {\n    _s();\n    const [graphData, setGraphData] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [selectedNode, setSelectedNode] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [nodeById, setNodeById] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(new Map());\n    const [filterOptions, setFilterOptions] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n        searchTerm: \"\",\n        nodeType: \"all\",\n        minYear: \"\",\n        authorName: \"\",\n        fieldsOfStudy: \"\",\n        isOpenAccess: false\n    });\n    const [highlightedNodes, setHighlightedNodes] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(new Set());\n    const [showCycles, setShowCycles] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cycles, setCycles] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const handleFileUpload = (event)=>{\n        const file = event.target.files[0];\n        if (!file) return;\n        setLoading(true);\n        const reader = new FileReader();\n        reader.onload = (e)=>{\n            try {\n                const jsonData = JSON.parse(e.target.result);\n                processGraphData(jsonData);\n            } catch (error) {\n                console.error(\"Error parsing JSON:\", error);\n                alert(\"Failed to parse the JSON file. Please check the file format.\");\n            } finally{\n                setLoading(false);\n            }\n        };\n        reader.readAsText(file);\n    };\n    const processGraphData = (data)=>{\n        // Create node lookup map\n        const nodeMap = new Map();\n        data.nodes.forEach((node)=>{\n            nodeMap.set(node.id, {\n                ...node,\n                // Ensure these fields exist with default values\n                type: node.type || \"unknown\",\n                title: node.title || node.name || node.id,\n                year: node.year || null,\n                citation_count: node.citation_count || 0\n            });\n        });\n        setNodeById(nodeMap);\n        setGraphData(data);\n        // Find cycles in the graph\n        if (data.edges && data.edges.length > 0) {\n            const foundCycles = findCycles(data.nodes, data.edges);\n            setCycles(foundCycles);\n        }\n    };\n    // Algorithm to find citation cycles in the graph\n    const findCycles = (nodes, edges)=>{\n        // Create an adjacency list representation of the graph\n        const graph = {};\n        // Initialize empty arrays for each node\n        nodes.forEach((node)=>{\n            graph[node.id] = [];\n        });\n        // Add directed edges\n        edges.forEach((edge)=>{\n            if (edge.type === \"cites\" && graph[edge.source]) {\n                graph[edge.source].push(edge.target);\n            }\n        });\n        // Function to find cycles using DFS\n        const findCyclesDFS = ()=>{\n            const cycles = [];\n            const visited = new Set();\n            const recStack = new Set();\n            const path = [];\n            const dfs = (nodeId)=>{\n                if (recStack.has(nodeId)) {\n                    // Found a cycle - extract it from the path\n                    const cycleStart = path.lastIndexOf(nodeId);\n                    if (cycleStart !== -1) {\n                        const cycle = path.slice(cycleStart).concat(nodeId);\n                        cycles.push(cycle);\n                    }\n                    return;\n                }\n                if (visited.has(nodeId)) return;\n                visited.add(nodeId);\n                recStack.add(nodeId);\n                path.push(nodeId);\n                const neighbors = graph[nodeId] || [];\n                for (const neighbor of neighbors){\n                    dfs(neighbor);\n                }\n                path.pop();\n                recStack.delete(nodeId);\n            };\n            // Start DFS from each node\n            for(const nodeId in graph){\n                if (!visited.has(nodeId)) {\n                    dfs(nodeId);\n                }\n            }\n            return cycles;\n        };\n        return findCyclesDFS();\n    };\n    const handleNodeSelect = (node)=>{\n        console.log(\"Node selected:\", node); // For debugging\n        setSelectedNode(node); // Update state with the selected node\n    };\n    const handleFilterChange = (newFilters)=>{\n        setFilterOptions(newFilters);\n        // Apply filters to highlight matching nodes\n        applyFilters(newFilters);\n    };\n    const applyFilters = (filters)=>{\n        if (!graphData) return;\n        const highlighted = new Set();\n        graphData.nodes.forEach((node)=>{\n            // Skip if node doesn't match the node type filter\n            if (filters.nodeType !== \"all\" && node.type !== filters.nodeType) {\n                return;\n            }\n            // Check minimum year (for papers)\n            if (filters.minYear && node.type === \"paper\") {\n                const year = parseInt(node.year);\n                if (isNaN(year) || year < parseInt(filters.minYear)) {\n                    return;\n                }\n            }\n            // Check open access filter (for papers)\n            if (filters.isOpenAccess && node.type === \"paper\" && !node.is_open_access) {\n                return;\n            }\n            // Check fields of study (for papers)\n            if (filters.fieldsOfStudy && node.type === \"paper\" && node.fields_of_study) {\n                let fields = node.fields_of_study;\n                if (typeof fields === \"string\") {\n                    try {\n                        fields = JSON.parse(fields);\n                    } catch (e) {\n                        fields = [\n                            fields\n                        ];\n                    }\n                }\n                const searchFields = filters.fieldsOfStudy.toLowerCase().split(\",\").map((f)=>f.trim());\n                const matchesField = searchFields.some((searchField)=>Array.isArray(fields) && fields.some((field)=>field.toLowerCase().includes(searchField)));\n                if (!matchesField) {\n                    return;\n                }\n            }\n            // Check author name (for authors or for papers by title search)\n            if (filters.authorName && node.type === \"author\") {\n                const name = node.name || \"\";\n                if (!name.toLowerCase().includes(filters.authorName.toLowerCase())) {\n                    return;\n                }\n                highlighted.add(node.id);\n            } else if (filters.authorName && node.type === \"paper\") {\n                // For papers, we need to check if any of the authors match\n                const authors = node.authors;\n                let authorMatch = false;\n                if (authors) {\n                    let authorList = authors;\n                    if (typeof authors === \"string\") {\n                        try {\n                            authorList = JSON.parse(authors);\n                        } catch (e) {\n                            authorList = [\n                                authors\n                            ];\n                        }\n                    }\n                    if (Array.isArray(authorList)) {\n                        authorMatch = authorList.some((author)=>{\n                            const authorName = typeof author === \"object\" ? author.name || \"\" : author;\n                            return authorName.toLowerCase().includes(filters.authorName.toLowerCase());\n                        });\n                    }\n                }\n                if (!authorMatch) {\n                    return;\n                }\n            }\n            // Check general search term (title, abstract, venue)\n            if (filters.searchTerm) {\n                const searchTerm = filters.searchTerm.toLowerCase();\n                const title = (node.title || node.name || \"\").toLowerCase();\n                const abstract = (node.abstract || \"\").toLowerCase();\n                const venue = (node.venue || \"\").toLowerCase();\n                if (title.includes(searchTerm) || abstract.includes(searchTerm) || venue.includes(searchTerm)) {\n                    highlighted.add(node.id);\n                } else {\n                    return;\n                }\n            }\n            // If node passed all applicable filters, add to highlighted set\n            highlighted.add(node.id);\n        });\n        setHighlightedNodes(highlighted);\n    };\n    const toggleCycles = ()=>{\n        setShowCycles(!showCycles);\n    };\n    const resetView = ()=>{\n        setSelectedNode(null);\n        setHighlightedNodes(new Set());\n        setFilterOptions({\n            searchTerm: \"\",\n            nodeType: \"all\",\n            minYear: \"\",\n            authorName: \"\",\n            fieldsOfStudy: \"\",\n            isOpenAccess: false\n        });\n        setShowCycles(false);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100vh\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_1___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: \"Citation Graph Visualizer\"\n                    }, void 0, false, {\n                        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                        lineNumber: 273,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Interactive visualization of citation graphs\"\n                    }, void 0, false, {\n                        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                        lineNumber: 274,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"icon\",\n                        href: \"/favicon.ico\"\n                    }, void 0, false, {\n                        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                        lineNumber: 275,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                lineNumber: 272,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: \"flex\",\n                    flex: 1,\n                    overflow: \"hidden\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Sidebar__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                        onFileUpload: handleFileUpload,\n                        graphData: graphData,\n                        nodeById: nodeById,\n                        selectedNode: selectedNode,\n                        onNodeSelect: handleNodeSelect,\n                        filterOptions: filterOptions,\n                        onFilterChange: handleFilterChange,\n                        onToggleCycles: toggleCycles,\n                        showCycles: showCycles,\n                        onReset: resetView,\n                        cycleCount: cycles.length\n                    }, void 0, false, {\n                        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                        lineNumber: 284,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            display: \"flex\",\n                            flex: 1,\n                            overflow: \"hidden\",\n                            position: \"relative\"\n                        },\n                        children: [\n                            loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingSpinner__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                                lineNumber: 305,\n                                columnNumber: 23\n                            }, this),\n                            graphData && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_GraphVisualizer__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                graphData: graphData,\n                                selectedNode: selectedNode,\n                                onNodeSelect: handleNodeSelect,\n                                highlightedNodes: highlightedNodes,\n                                showCycles: showCycles,\n                                cycles: cycles\n                            }, void 0, false, {\n                                fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                                lineNumber: 308,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                        lineNumber: 299,\n                        columnNumber: 9\n                    }, this),\n                    selectedNode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ResizableDetailsPanel, {\n                        node: selectedNode,\n                        nodeById: nodeById,\n                        graphData: graphData\n                    }, void 0, false, {\n                        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                        lineNumber: 321,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n                lineNumber: 278,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/pranavsingh/researchkg_interactive/pages/index.js\",\n        lineNumber: 267,\n        columnNumber: 5\n    }, this);\n}\n_s(Home, \"9EOinUKqhaakgyEU6pBASb2flUI=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7OztrQ0FDakMsOERBQUNDO3dCQUFLQyxLQUFJO3dCQUFPQyxNQUFLOzs7Ozs7Ozs7Ozs7MEJBR3hCLDhEQUFDVDtnQkFBSUMsT0FBTztvQkFDVkMsU0FBUztvQkFDVFEsTUFBTTtvQkFDTkMsVUFBVTtnQkFDWjs7a0NBRUUsOERBQUMvSCwyREFBT0E7d0JBQ05nSSxjQUFjcEc7d0JBQ2R4QixXQUFXQTt3QkFDWE0sVUFBVUE7d0JBQ1ZGLGNBQWNBO3dCQUNkeUgsY0FBYzlDO3dCQUNkdEUsZUFBZUE7d0JBQ2ZxSCxnQkFBZ0I3Qzt3QkFDaEI4QyxnQkFBZ0JqQjt3QkFDaEIxRixZQUFZQTt3QkFDWjRHLFNBQVNqQjt3QkFDVGtCLFlBQVkzRyxPQUFPaUMsTUFBTTs7Ozs7O2tDQUkzQiw4REFBQ3lEO3dCQUFJQyxPQUFPOzRCQUNWQyxTQUFTOzRCQUNUUSxNQUFNOzRCQUNOQyxVQUFVOzRCQUNWTyxVQUFVO3dCQUNaOzs0QkFDR2hJLHlCQUFXLDhEQUFDSixrRUFBY0E7Ozs7OzRCQUUxQkUsMkJBQ0MsOERBQUNMLG1FQUFlQTtnQ0FDZEssV0FBV0E7Z0NBQ1hJLGNBQWNBO2dDQUNkeUgsY0FBYzlDO2dDQUNkOUQsa0JBQWtCQTtnQ0FDbEJHLFlBQVlBO2dDQUNaRSxRQUFRQTs7Ozs7Ozs7Ozs7O29CQU1ibEIsOEJBQ0MsOERBQUMrSDt3QkFDQ3JGLE1BQU0xQzt3QkFDTkUsVUFBVUE7d0JBQ1ZOLFdBQVdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNdkI7R0FsVXdCRDtLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9wYWdlcy9pbmRleC5qcz9iZWU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgR3JhcGhWaXN1YWxpemVyIGZyb20gJy4uL2NvbXBvbmVudHMvR3JhcGhWaXN1YWxpemVyJztcbmltcG9ydCBTaWRlYmFyIGZyb20gJy4uL2NvbXBvbmVudHMvU2lkZWJhcic7XG5pbXBvcnQgRGV0YWlsc1BhbmVsIGZyb20gJy4uL2NvbXBvbmVudHMvRGV0YWlsc1BhbmVsJztcbmltcG9ydCBMb2FkaW5nU3Bpbm5lciBmcm9tICcuLi9jb21wb25lbnRzL0xvYWRpbmdTcGlubmVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZSgpIHtcbiAgY29uc3QgW2dyYXBoRGF0YSwgc2V0R3JhcGhEYXRhXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZE5vZGUsIHNldFNlbGVjdGVkTm9kZV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW25vZGVCeUlkLCBzZXROb2RlQnlJZF0gPSB1c2VTdGF0ZShuZXcgTWFwKCkpO1xuICBjb25zdCBbZmlsdGVyT3B0aW9ucywgc2V0RmlsdGVyT3B0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgc2VhcmNoVGVybTogJycsXG4gICAgbm9kZVR5cGU6ICdhbGwnLFxuICAgIG1pblllYXI6ICcnLFxuICAgIGF1dGhvck5hbWU6ICcnLFxuICAgIGZpZWxkc09mU3R1ZHk6ICcnLFxuICAgIGlzT3BlbkFjY2VzczogZmFsc2VcbiAgfSk7XG4gIGNvbnN0IFtoaWdobGlnaHRlZE5vZGVzLCBzZXRIaWdobGlnaHRlZE5vZGVzXSA9IHVzZVN0YXRlKG5ldyBTZXQoKSk7XG4gIGNvbnN0IFtzaG93Q3ljbGVzLCBzZXRTaG93Q3ljbGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N5Y2xlcywgc2V0Q3ljbGVzXSA9IHVzZVN0YXRlKFtdKTtcblxuICBjb25zdCBoYW5kbGVGaWxlVXBsb2FkID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICBwcm9jZXNzR3JhcGhEYXRhKGpzb25EYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIEpTT046XCIsIGVycm9yKTtcbiAgICAgICAgYWxlcnQoXCJGYWlsZWQgdG8gcGFyc2UgdGhlIEpTT04gZmlsZS4gUGxlYXNlIGNoZWNrIHRoZSBmaWxlIGZvcm1hdC5cIik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICB9O1xuXG4gIGNvbnN0IHByb2Nlc3NHcmFwaERhdGEgPSAoZGF0YSkgPT4ge1xuICAgIC8vIENyZWF0ZSBub2RlIGxvb2t1cCBtYXBcbiAgICBjb25zdCBub2RlTWFwID0gbmV3IE1hcCgpO1xuICAgIGRhdGEubm9kZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgIG5vZGVNYXAuc2V0KG5vZGUuaWQsIHtcbiAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgLy8gRW5zdXJlIHRoZXNlIGZpZWxkcyBleGlzdCB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIHR5cGU6IG5vZGUudHlwZSB8fCBcInVua25vd25cIixcbiAgICAgICAgdGl0bGU6IG5vZGUudGl0bGUgfHwgbm9kZS5uYW1lIHx8IG5vZGUuaWQsXG4gICAgICAgIHllYXI6IG5vZGUueWVhciB8fCBudWxsLFxuICAgICAgICBjaXRhdGlvbl9jb3VudDogbm9kZS5jaXRhdGlvbl9jb3VudCB8fCAwLFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgc2V0Tm9kZUJ5SWQobm9kZU1hcCk7XG4gICAgc2V0R3JhcGhEYXRhKGRhdGEpO1xuICAgIFxuICAgIC8vIEZpbmQgY3ljbGVzIGluIHRoZSBncmFwaFxuICAgIGlmIChkYXRhLmVkZ2VzICYmIGRhdGEuZWRnZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZm91bmRDeWNsZXMgPSBmaW5kQ3ljbGVzKGRhdGEubm9kZXMsIGRhdGEuZWRnZXMpO1xuICAgICAgc2V0Q3ljbGVzKGZvdW5kQ3ljbGVzKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQWxnb3JpdGhtIHRvIGZpbmQgY2l0YXRpb24gY3ljbGVzIGluIHRoZSBncmFwaFxuICBjb25zdCBmaW5kQ3ljbGVzID0gKG5vZGVzLCBlZGdlcykgPT4ge1xuICAgIC8vIENyZWF0ZSBhbiBhZGphY2VuY3kgbGlzdCByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ3JhcGhcbiAgICBjb25zdCBncmFwaCA9IHt9O1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZW1wdHkgYXJyYXlzIGZvciBlYWNoIG5vZGVcbiAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgZ3JhcGhbbm9kZS5pZF0gPSBbXTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBZGQgZGlyZWN0ZWQgZWRnZXNcbiAgICBlZGdlcy5mb3JFYWNoKGVkZ2UgPT4ge1xuICAgICAgaWYgKGVkZ2UudHlwZSA9PT0gJ2NpdGVzJyAmJiBncmFwaFtlZGdlLnNvdXJjZV0pIHtcbiAgICAgICAgZ3JhcGhbZWRnZS5zb3VyY2VdLnB1c2goZWRnZS50YXJnZXQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRvIGZpbmQgY3ljbGVzIHVzaW5nIERGU1xuICAgIGNvbnN0IGZpbmRDeWNsZXNERlMgPSAoKSA9PiB7XG4gICAgICBjb25zdCBjeWNsZXMgPSBbXTtcbiAgICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gICAgICBjb25zdCByZWNTdGFjayA9IG5ldyBTZXQoKTtcbiAgICAgIGNvbnN0IHBhdGggPSBbXTtcbiAgICAgIFxuICAgICAgY29uc3QgZGZzID0gKG5vZGVJZCkgPT4ge1xuICAgICAgICBpZiAocmVjU3RhY2suaGFzKG5vZGVJZCkpIHtcbiAgICAgICAgICAvLyBGb3VuZCBhIGN5Y2xlIC0gZXh0cmFjdCBpdCBmcm9tIHRoZSBwYXRoXG4gICAgICAgICAgY29uc3QgY3ljbGVTdGFydCA9IHBhdGgubGFzdEluZGV4T2Yobm9kZUlkKTtcbiAgICAgICAgICBpZiAoY3ljbGVTdGFydCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN5Y2xlID0gcGF0aC5zbGljZShjeWNsZVN0YXJ0KS5jb25jYXQobm9kZUlkKTtcbiAgICAgICAgICAgIGN5Y2xlcy5wdXNoKGN5Y2xlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodmlzaXRlZC5oYXMobm9kZUlkKSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdmlzaXRlZC5hZGQobm9kZUlkKTtcbiAgICAgICAgcmVjU3RhY2suYWRkKG5vZGVJZCk7XG4gICAgICAgIHBhdGgucHVzaChub2RlSWQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbmVpZ2hib3JzID0gZ3JhcGhbbm9kZUlkXSB8fCBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuZWlnaGJvciBvZiBuZWlnaGJvcnMpIHtcbiAgICAgICAgICBkZnMobmVpZ2hib3IpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwYXRoLnBvcCgpO1xuICAgICAgICByZWNTdGFjay5kZWxldGUobm9kZUlkKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IERGUyBmcm9tIGVhY2ggbm9kZVxuICAgICAgZm9yIChjb25zdCBub2RlSWQgaW4gZ3JhcGgpIHtcbiAgICAgICAgaWYgKCF2aXNpdGVkLmhhcyhub2RlSWQpKSB7XG4gICAgICAgICAgZGZzKG5vZGVJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGN5Y2xlcztcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiBmaW5kQ3ljbGVzREZTKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTm9kZVNlbGVjdCA9IChub2RlKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJOb2RlIHNlbGVjdGVkOlwiLCBub2RlKTsgLy8gRm9yIGRlYnVnZ2luZ1xuICAgIHNldFNlbGVjdGVkTm9kZShub2RlKTsgLy8gVXBkYXRlIHN0YXRlIHdpdGggdGhlIHNlbGVjdGVkIG5vZGVcbiAgfTtcblxuICBjb25zdCBoYW5kbGVGaWx0ZXJDaGFuZ2UgPSAobmV3RmlsdGVycykgPT4ge1xuICAgIHNldEZpbHRlck9wdGlvbnMobmV3RmlsdGVycyk7XG4gICAgXG4gICAgLy8gQXBwbHkgZmlsdGVycyB0byBoaWdobGlnaHQgbWF0Y2hpbmcgbm9kZXNcbiAgICBhcHBseUZpbHRlcnMobmV3RmlsdGVycyk7XG4gIH07XG5cbiAgY29uc3QgYXBwbHlGaWx0ZXJzID0gKGZpbHRlcnMpID0+IHtcbiAgICBpZiAoIWdyYXBoRGF0YSkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGhpZ2hsaWdodGVkID0gbmV3IFNldCgpO1xuICAgIFxuICAgIGdyYXBoRGF0YS5ub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgLy8gU2tpcCBpZiBub2RlIGRvZXNuJ3QgbWF0Y2ggdGhlIG5vZGUgdHlwZSBmaWx0ZXJcbiAgICAgIGlmIChmaWx0ZXJzLm5vZGVUeXBlICE9PSAnYWxsJyAmJiBub2RlLnR5cGUgIT09IGZpbHRlcnMubm9kZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBtaW5pbXVtIHllYXIgKGZvciBwYXBlcnMpXG4gICAgICBpZiAoZmlsdGVycy5taW5ZZWFyICYmIG5vZGUudHlwZSA9PT0gJ3BhcGVyJykge1xuICAgICAgICBjb25zdCB5ZWFyID0gcGFyc2VJbnQobm9kZS55ZWFyKTtcbiAgICAgICAgaWYgKGlzTmFOKHllYXIpIHx8IHllYXIgPCBwYXJzZUludChmaWx0ZXJzLm1pblllYXIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIG9wZW4gYWNjZXNzIGZpbHRlciAoZm9yIHBhcGVycylcbiAgICAgIGlmIChmaWx0ZXJzLmlzT3BlbkFjY2VzcyAmJiBub2RlLnR5cGUgPT09ICdwYXBlcicgJiYgIW5vZGUuaXNfb3Blbl9hY2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBmaWVsZHMgb2Ygc3R1ZHkgKGZvciBwYXBlcnMpXG4gICAgICBpZiAoZmlsdGVycy5maWVsZHNPZlN0dWR5ICYmIG5vZGUudHlwZSA9PT0gJ3BhcGVyJyAmJiBub2RlLmZpZWxkc19vZl9zdHVkeSkge1xuICAgICAgICBsZXQgZmllbGRzID0gbm9kZS5maWVsZHNfb2Zfc3R1ZHk7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaWVsZHMgPSBKU09OLnBhcnNlKGZpZWxkcyk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZmllbGRzID0gW2ZpZWxkc107XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWFyY2hGaWVsZHMgPSBmaWx0ZXJzLmZpZWxkc09mU3R1ZHkudG9Mb3dlckNhc2UoKS5zcGxpdCgnLCcpLm1hcChmID0+IGYudHJpbSgpKTtcbiAgICAgICAgY29uc3QgbWF0Y2hlc0ZpZWxkID0gc2VhcmNoRmllbGRzLnNvbWUoc2VhcmNoRmllbGQgPT4gXG4gICAgICAgICAgQXJyYXkuaXNBcnJheShmaWVsZHMpICYmIGZpZWxkcy5zb21lKGZpZWxkID0+IFxuICAgICAgICAgICAgZmllbGQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hGaWVsZClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW1hdGNoZXNGaWVsZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBhdXRob3IgbmFtZSAoZm9yIGF1dGhvcnMgb3IgZm9yIHBhcGVycyBieSB0aXRsZSBzZWFyY2gpXG4gICAgICBpZiAoZmlsdGVycy5hdXRob3JOYW1lICYmIG5vZGUudHlwZSA9PT0gJ2F1dGhvcicpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IG5vZGUubmFtZSB8fCAnJztcbiAgICAgICAgaWYgKCFuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVycy5hdXRob3JOYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhpZ2hsaWdodGVkLmFkZChub2RlLmlkKTtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVycy5hdXRob3JOYW1lICYmIG5vZGUudHlwZSA9PT0gJ3BhcGVyJykge1xuICAgICAgICAvLyBGb3IgcGFwZXJzLCB3ZSBuZWVkIHRvIGNoZWNrIGlmIGFueSBvZiB0aGUgYXV0aG9ycyBtYXRjaFxuICAgICAgICBjb25zdCBhdXRob3JzID0gbm9kZS5hdXRob3JzO1xuICAgICAgICBsZXQgYXV0aG9yTWF0Y2ggPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhdXRob3JzKSB7XG4gICAgICAgICAgbGV0IGF1dGhvckxpc3QgPSBhdXRob3JzO1xuICAgICAgICAgIGlmICh0eXBlb2YgYXV0aG9ycyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF1dGhvckxpc3QgPSBKU09OLnBhcnNlKGF1dGhvcnMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBhdXRob3JMaXN0ID0gW2F1dGhvcnNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXRob3JMaXN0KSkge1xuICAgICAgICAgICAgYXV0aG9yTWF0Y2ggPSBhdXRob3JMaXN0LnNvbWUoYXV0aG9yID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgYXV0aG9yTmFtZSA9IHR5cGVvZiBhdXRob3IgPT09ICdvYmplY3QnID8gKGF1dGhvci5uYW1lIHx8ICcnKSA6IGF1dGhvcjtcbiAgICAgICAgICAgICAgcmV0dXJuIGF1dGhvck5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJzLmF1dGhvck5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghYXV0aG9yTWF0Y2gpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZ2VuZXJhbCBzZWFyY2ggdGVybSAodGl0bGUsIGFic3RyYWN0LCB2ZW51ZSlcbiAgICAgIGlmIChmaWx0ZXJzLnNlYXJjaFRlcm0pIHtcbiAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IGZpbHRlcnMuc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IChub2RlLnRpdGxlIHx8IG5vZGUubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgYWJzdHJhY3QgPSAobm9kZS5hYnN0cmFjdCB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgdmVudWUgPSAobm9kZS52ZW51ZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aXRsZS5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fCBhYnN0cmFjdC5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fCB2ZW51ZS5pbmNsdWRlcyhzZWFyY2hUZXJtKSkge1xuICAgICAgICAgIGhpZ2hsaWdodGVkLmFkZChub2RlLmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgbm9kZSBwYXNzZWQgYWxsIGFwcGxpY2FibGUgZmlsdGVycywgYWRkIHRvIGhpZ2hsaWdodGVkIHNldFxuICAgICAgaGlnaGxpZ2h0ZWQuYWRkKG5vZGUuaWQpO1xuICAgIH0pO1xuICAgIFxuICAgIHNldEhpZ2hsaWdodGVkTm9kZXMoaGlnaGxpZ2h0ZWQpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZUN5Y2xlcyA9ICgpID0+IHtcbiAgICBzZXRTaG93Q3ljbGVzKCFzaG93Q3ljbGVzKTtcbiAgfTtcblxuICBjb25zdCByZXNldFZpZXcgPSAoKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWROb2RlKG51bGwpO1xuICAgIHNldEhpZ2hsaWdodGVkTm9kZXMobmV3IFNldCgpKTtcbiAgICBzZXRGaWx0ZXJPcHRpb25zKHtcbiAgICAgIHNlYXJjaFRlcm06ICcnLFxuICAgICAgbm9kZVR5cGU6ICdhbGwnLFxuICAgICAgbWluWWVhcjogJycsXG4gICAgICBhdXRob3JOYW1lOiAnJyxcbiAgICAgIGZpZWxkc09mU3R1ZHk6ICcnLFxuICAgICAgaXNPcGVuQWNjZXNzOiBmYWxzZVxuICAgIH0pO1xuICAgIHNldFNob3dDeWNsZXMoZmFsc2UpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17e1xuICAgICAgZGlzcGxheTogXCJmbGV4XCIsIFxuICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgIGhlaWdodDogXCIxMDB2aFwiXG4gICAgfX0+XG4gICAgICA8SGVhZD5cbiAgICAgICAgPHRpdGxlPkNpdGF0aW9uIEdyYXBoIFZpc3VhbGl6ZXI8L3RpdGxlPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiSW50ZXJhY3RpdmUgdmlzdWFsaXphdGlvbiBvZiBjaXRhdGlvbiBncmFwaHNcIiAvPlxuICAgICAgICA8bGluayByZWw9XCJpY29uXCIgaHJlZj1cIi9mYXZpY29uLmljb1wiIC8+XG4gICAgICA8L0hlYWQ+XG4gIFxuICAgICAgPGRpdiBzdHlsZT17e1xuICAgICAgICBkaXNwbGF5OiBcImZsZXhcIiwgXG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiXG4gICAgICB9fT5cbiAgICAgICAgey8qIExlZnQgc2lkZWJhciBmb3Igc2VhcmNoIGFuZCBmaWx0ZXJzICovfVxuICAgICAgICA8U2lkZWJhciBcbiAgICAgICAgICBvbkZpbGVVcGxvYWQ9e2hhbmRsZUZpbGVVcGxvYWR9XG4gICAgICAgICAgZ3JhcGhEYXRhPXtncmFwaERhdGF9XG4gICAgICAgICAgbm9kZUJ5SWQ9e25vZGVCeUlkfVxuICAgICAgICAgIHNlbGVjdGVkTm9kZT17c2VsZWN0ZWROb2RlfVxuICAgICAgICAgIG9uTm9kZVNlbGVjdD17aGFuZGxlTm9kZVNlbGVjdH1cbiAgICAgICAgICBmaWx0ZXJPcHRpb25zPXtmaWx0ZXJPcHRpb25zfVxuICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlPXtoYW5kbGVGaWx0ZXJDaGFuZ2V9XG4gICAgICAgICAgb25Ub2dnbGVDeWNsZXM9e3RvZ2dsZUN5Y2xlc31cbiAgICAgICAgICBzaG93Q3ljbGVzPXtzaG93Q3ljbGVzfVxuICAgICAgICAgIG9uUmVzZXQ9e3Jlc2V0Vmlld31cbiAgICAgICAgICBjeWNsZUNvdW50PXtjeWNsZXMubGVuZ3RofVxuICAgICAgICAvPlxuICAgICAgICBcbiAgICAgICAgey8qIE1haW4gZ3JhcGggdmlzdWFsaXphdGlvbiBhcmVhICovfVxuICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsIFxuICAgICAgICAgIGZsZXg6IDEsXG4gICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIlxuICAgICAgICB9fT5cbiAgICAgICAgICB7bG9hZGluZyAmJiA8TG9hZGluZ1NwaW5uZXIgLz59XG4gICAgICAgICAgXG4gICAgICAgICAge2dyYXBoRGF0YSAmJiAoXG4gICAgICAgICAgICA8R3JhcGhWaXN1YWxpemVyIFxuICAgICAgICAgICAgICBncmFwaERhdGE9e2dyYXBoRGF0YX1cbiAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlPXtzZWxlY3RlZE5vZGV9XG4gICAgICAgICAgICAgIG9uTm9kZVNlbGVjdD17aGFuZGxlTm9kZVNlbGVjdH1cbiAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWROb2Rlcz17aGlnaGxpZ2h0ZWROb2Rlc31cbiAgICAgICAgICAgICAgc2hvd0N5Y2xlcz17c2hvd0N5Y2xlc31cbiAgICAgICAgICAgICAgY3ljbGVzPXtjeWNsZXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgey8qIFJpZ2h0IHNpZGViYXIgZm9yIGRldGFpbHMgcGFuZWwgKGNvbmRpdGlvbmFsbHkgcmVuZGVyZWQpICovfVxuICAgICAgICB7c2VsZWN0ZWROb2RlICYmIChcbiAgICAgICAgICA8UmVzaXphYmxlRGV0YWlsc1BhbmVsIFxuICAgICAgICAgICAgbm9kZT17c2VsZWN0ZWROb2RlfSBcbiAgICAgICAgICAgIG5vZGVCeUlkPXtub2RlQnlJZH1cbiAgICAgICAgICAgIGdyYXBoRGF0YT17Z3JhcGhEYXRhfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn0iXSwibmFtZXMiOlsiSGVhZCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiR3JhcGhWaXN1YWxpemVyIiwiU2lkZWJhciIsIkRldGFpbHNQYW5lbCIsIkxvYWRpbmdTcGlubmVyIiwiSG9tZSIsImdyYXBoRGF0YSIsInNldEdyYXBoRGF0YSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwic2VsZWN0ZWROb2RlIiwic2V0U2VsZWN0ZWROb2RlIiwibm9kZUJ5SWQiLCJzZXROb2RlQnlJZCIsIk1hcCIsImZpbHRlck9wdGlvbnMiLCJzZXRGaWx0ZXJPcHRpb25zIiwic2VhcmNoVGVybSIsIm5vZGVUeXBlIiwibWluWWVhciIsImF1dGhvck5hbWUiLCJmaWVsZHNPZlN0dWR5IiwiaXNPcGVuQWNjZXNzIiwiaGlnaGxpZ2h0ZWROb2RlcyIsInNldEhpZ2hsaWdodGVkTm9kZXMiLCJTZXQiLCJzaG93Q3ljbGVzIiwic2V0U2hvd0N5Y2xlcyIsImN5Y2xlcyIsInNldEN5Y2xlcyIsImhhbmRsZUZpbGVVcGxvYWQiLCJldmVudCIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJlIiwianNvbkRhdGEiLCJKU09OIiwicGFyc2UiLCJyZXN1bHQiLCJwcm9jZXNzR3JhcGhEYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiYWxlcnQiLCJyZWFkQXNUZXh0IiwiZGF0YSIsIm5vZGVNYXAiLCJub2RlcyIsImZvckVhY2giLCJub2RlIiwic2V0IiwiaWQiLCJ0eXBlIiwidGl0bGUiLCJuYW1lIiwieWVhciIsImNpdGF0aW9uX2NvdW50IiwiZWRnZXMiLCJsZW5ndGgiLCJmb3VuZEN5Y2xlcyIsImZpbmRDeWNsZXMiLCJncmFwaCIsImVkZ2UiLCJzb3VyY2UiLCJwdXNoIiwiZmluZEN5Y2xlc0RGUyIsInZpc2l0ZWQiLCJyZWNTdGFjayIsInBhdGgiLCJkZnMiLCJub2RlSWQiLCJoYXMiLCJjeWNsZVN0YXJ0IiwibGFzdEluZGV4T2YiLCJjeWNsZSIsInNsaWNlIiwiY29uY2F0IiwiYWRkIiwibmVpZ2hib3JzIiwibmVpZ2hib3IiLCJwb3AiLCJkZWxldGUiLCJoYW5kbGVOb2RlU2VsZWN0IiwibG9nIiwiaGFuZGxlRmlsdGVyQ2hhbmdlIiwibmV3RmlsdGVycyIsImFwcGx5RmlsdGVycyIsImZpbHRlcnMiLCJoaWdobGlnaHRlZCIsInBhcnNlSW50IiwiaXNOYU4iLCJpc19vcGVuX2FjY2VzcyIsImZpZWxkc19vZl9zdHVkeSIsImZpZWxkcyIsInNlYXJjaEZpZWxkcyIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJtYXAiLCJmIiwidHJpbSIsIm1hdGNoZXNGaWVsZCIsInNvbWUiLCJzZWFyY2hGaWVsZCIsIkFycmF5IiwiaXNBcnJheSIsImZpZWxkIiwiaW5jbHVkZXMiLCJhdXRob3JzIiwiYXV0aG9yTWF0Y2giLCJhdXRob3JMaXN0IiwiYXV0aG9yIiwiYWJzdHJhY3QiLCJ2ZW51ZSIsInRvZ2dsZUN5Y2xlcyIsInJlc2V0VmlldyIsImRpdiIsInN0eWxlIiwiZGlzcGxheSIsImZsZXhEaXJlY3Rpb24iLCJoZWlnaHQiLCJtZXRhIiwiY29udGVudCIsImxpbmsiLCJyZWwiLCJocmVmIiwiZmxleCIsIm92ZXJmbG93Iiwib25GaWxlVXBsb2FkIiwib25Ob2RlU2VsZWN0Iiwib25GaWx0ZXJDaGFuZ2UiLCJvblRvZ2dsZUN5Y2xlcyIsIm9uUmVzZXQiLCJjeWNsZUNvdW50IiwicG9zaXRpb24iLCJSZXNpemFibGVEZXRhaWxzUGFuZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/index.js\n"));

/***/ })

});